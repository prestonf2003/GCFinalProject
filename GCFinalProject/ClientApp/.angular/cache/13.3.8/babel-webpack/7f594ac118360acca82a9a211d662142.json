{"ast":null,"code":"import { Favorite } from '../favorite';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../toon-service.service\";\nimport * as i2 from \"../character.service\";\nimport * as i3 from \"../dnd.service\";\nimport * as i4 from \"@angular/router\";\nimport * as i5 from \"@angular/common\";\nimport * as i6 from \"@angular/forms\";\n\nfunction CartoonCharComponent_div_0_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r3 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\")(1, \"input\", 1);\n    i0.ɵɵlistener(\"ngModelChange\", function CartoonCharComponent_div_0_Template_input_ngModelChange_1_listener($event) {\n      i0.ɵɵrestoreView(_r3);\n      const ctx_r2 = i0.ɵɵnextContext();\n      return ctx_r2.userId = $event;\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(2, \"button\", 2);\n    i0.ɵɵlistener(\"click\", function CartoonCharComponent_div_0_Template_button_click_2_listener() {\n      i0.ɵɵrestoreView(_r3);\n      const ctx_r4 = i0.ɵɵnextContext();\n      ctx_r4.charService.login(ctx_r4.userId);\n      return ctx_r4.ngOnInit();\n    });\n    i0.ɵɵtext(3, \"Login\");\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngModel\", ctx_r0.userId);\n  }\n}\n\nfunction CartoonCharComponent_span_1_option_13_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const c_r7 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(c_r7.name);\n  }\n}\n\nfunction CartoonCharComponent_span_1_option_22_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const s_r8 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(s_r8.class);\n  }\n}\n\nfunction CartoonCharComponent_span_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r10 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"span\");\n    i0.ɵɵelement(1, \"br\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementStart(3, \"button\", 3);\n    i0.ɵɵlistener(\"click\", function CartoonCharComponent_span_1_Template_button_click_3_listener() {\n      i0.ɵɵrestoreView(_r10);\n      const ctx_r9 = i0.ɵɵnextContext();\n      ctx_r9.charService.logout();\n      return ctx_r9.ngOnInit();\n    });\n    i0.ɵɵtext(4, \" Logout \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(5, \"br\");\n    i0.ɵɵelementStart(6, \"label\", 4);\n    i0.ɵɵtext(7, \"Select a cartoon to battle:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(8, \"br\")(9, \"br\");\n    i0.ɵɵelementStart(10, \"select\", 5);\n    i0.ɵɵlistener(\"ngModelChange\", function CartoonCharComponent_span_1_Template_select_ngModelChange_10_listener($event) {\n      i0.ɵɵrestoreView(_r10);\n      const ctx_r11 = i0.ɵɵnextContext();\n      return ctx_r11.cartSearch = $event;\n    });\n    i0.ɵɵelementStart(11, \"option\", 6);\n    i0.ɵɵtext(12, \"----\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(13, CartoonCharComponent_span_1_option_13_Template, 2, 1, \"option\", 7);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(14, \"br\");\n    i0.ɵɵelementStart(15, \"label\", 4);\n    i0.ɵɵtext(16, \"Select a favorite to battle:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(17, \"br\")(18, \"br\");\n    i0.ɵɵelementStart(19, \"select\", 5);\n    i0.ɵɵlistener(\"ngModelChange\", function CartoonCharComponent_span_1_Template_select_ngModelChange_19_listener($event) {\n      i0.ɵɵrestoreView(_r10);\n      const ctx_r12 = i0.ɵɵnextContext();\n      return ctx_r12.favSearch = $event;\n    });\n    i0.ɵɵelementStart(20, \"option\", 6);\n    i0.ɵɵtext(21, \"----\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(22, CartoonCharComponent_span_1_option_22_Template, 2, 1, \"option\", 7);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(23, \"button\", 2);\n    i0.ɵɵlistener(\"click\", function CartoonCharComponent_span_1_Template_button_click_23_listener() {\n      i0.ɵɵrestoreView(_r10);\n      const ctx_r13 = i0.ɵɵnextContext();\n      ctx_r13.battle(ctx_r13.cartSearch, ctx_r13.favSearch);\n      return ctx_r13.ngOnInit();\n    });\n    i0.ɵɵtext(24, \"Battle\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(25, \"br\");\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" Logged in as: \", ctx_r1.currentUser, \" \");\n    i0.ɵɵadvance(8);\n    i0.ɵɵproperty(\"ngModel\", ctx_r1.cartSearch);\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r1.searchedToons);\n    i0.ɵɵadvance(6);\n    i0.ɵɵproperty(\"ngModel\", ctx_r1.favSearch);\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r1.searchedCharacters);\n  }\n}\n\nexport let CartoonCharComponent = /*#__PURE__*/(() => {\n  class CartoonCharComponent {\n    constructor(toonService, charService, dndService, router) {\n      this.toonService = toonService;\n      this.charService = charService;\n      this.dndService = dndService;\n      this.router = router;\n      this.currentUser = this.charService.currentUser;\n      this.searchedToons = [];\n      this.userId = '';\n      this.favorites = [];\n      this.searchedCharacters = [];\n      this.name = '';\n      this.newFavorite = new Favorite(-1, 'user here', -1);\n      this.favSearch = this.toonService.favSearch;\n      this.cartSearch = this.toonService.cartSearch;\n      this.charService.showAllCharacters().subscribe(result => {\n        this.searchedCharacters = result;\n        console.log(this.searchedCharacters);\n      });\n      this.showAllFavorites();\n      this.showAllCartoonCharacters();\n    }\n\n    showAllFavorites() {\n      this.dndService.showFavorites().subscribe(allFavorites => {\n        this.favorites = allFavorites;\n      });\n    }\n\n    showAllCartoonCharacters() {\n      this.toonService.showAllCartoonCharacters().subscribe(result => {\n        this.searchedToons = result;\n      });\n    }\n\n    GetCharacterByName(name) {\n      var _a;\n\n      let searchByFaves = (_a = document.getElementById('favSearchCheckBox')) !== null && _a !== void 0 ? _a : false;\n      this.charService.GetCharacterByName(name).subscribe(response => {\n        this.searchedCharacters = response;\n        console.log(this.searchedCharacters);\n        console.log(this.currentUser);\n\n        if (!searchByFaves.checked) {\n          this.searchForFavorites();\n        }\n      });\n    }\n\n    searchForFavorites() {\n      let newSearched = [];\n      newSearched = this.searchedCharacters.filter(character => this.isFavorited(character.pkId));\n      console.log(newSearched);\n      this.searchedCharacters = newSearched;\n    }\n\n    isFavorited(characterId) {\n      for (let i = 0; i < this.favorites.length; i++) {\n        if (this.favorites[i].id == characterId && this.favorites[i].userId === this.charService.currentUser) {\n          return true;\n        }\n      }\n\n      return false;\n    }\n\n    createFavorite(characterId) {\n      this.newFavorite = new Favorite(undefined, this.charService.currentUser, characterId);\n      this.dndService.createFavorite(this.newFavorite).subscribe(() => {\n        this.showAllFavorites();\n      });\n    }\n\n    deleteFavorite(characterId) {\n      let foundFav = this.favorites.find(favorite => favorite.id === characterId && favorite.userId === this.charService.currentUser);\n      this.dndService.deleteFavorite(foundFav.pkId).subscribe(() => {\n        this.favorites.splice(this.favorites.indexOf(foundFav), 1);\n      });\n    }\n\n    battle(cartoon, character) {\n      this.toonService.cartSearch = cartoon;\n      this.toonService.favSearch = character;\n      this.router.navigateByUrl('/battle');\n    }\n\n    ngOnInit() {\n      this.currentUser = this.charService.currentUser;\n      this.userId = '';\n      this.GetCharacterByName('');\n      this.favSearch = this.toonService.favSearch;\n      this.cartSearch = this.toonService.cartSearch;\n    }\n\n  }\n\n  CartoonCharComponent.ɵfac = function CartoonCharComponent_Factory(t) {\n    return new (t || CartoonCharComponent)(i0.ɵɵdirectiveInject(i1.ToonServiceService), i0.ɵɵdirectiveInject(i2.CharacterService), i0.ɵɵdirectiveInject(i3.DndService), i0.ɵɵdirectiveInject(i4.Router));\n  };\n\n  CartoonCharComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: CartoonCharComponent,\n    selectors: [[\"app-cartoon-char\"]],\n    decls: 2,\n    vars: 2,\n    consts: [[4, \"ngIf\"], [\"type\", \"text\", \"id\", \"username\", \"placeholder\", \"Username\", 3, \"ngModel\", \"ngModelChange\"], [3, \"click\"], [1, \"buttonStyle\", 3, \"click\"], [\"for\", \"classes\"], [3, \"ngModel\", \"ngModelChange\"], [\"value\", \"default\"], [4, \"ngFor\", \"ngForOf\"]],\n    template: function CartoonCharComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵtemplate(0, CartoonCharComponent_div_0_Template, 4, 1, \"div\", 0);\n        i0.ɵɵtemplate(1, CartoonCharComponent_span_1_Template, 26, 5, \"span\", 0);\n      }\n\n      if (rf & 2) {\n        i0.ɵɵproperty(\"ngIf\", ctx.currentUser === \"\");\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.currentUser !== \"\");\n      }\n    },\n    directives: [i5.NgIf, i6.DefaultValueAccessor, i6.NgControlStatus, i6.NgModel, i6.SelectControlValueAccessor, i6.NgSelectOption, i6.ɵNgSelectMultipleOption, i5.NgForOf],\n    styles: [\"\"]\n  });\n  return CartoonCharComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}