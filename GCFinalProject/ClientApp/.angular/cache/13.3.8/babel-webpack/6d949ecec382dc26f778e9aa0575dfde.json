{"ast":null,"code":"import _asyncToGenerator from \"C:\\\\Users\\\\pmanf\\\\Desktop\\\\Grand Circus\\\\unit9\\\\GCFinalProject\\\\GCFinalProject\\\\ClientApp\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\asyncToGenerator.js\";\nimport { Favorite } from '../favorite';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../dnd.service\";\nimport * as i2 from \"../character.service\";\nimport * as i3 from \"../toon-service.service\";\nimport * as i4 from \"@angular/common\";\nimport * as i5 from \"@angular/forms\";\n\nfunction BattleComponent_div_0_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r3 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\")(1, \"input\", 2);\n    i0.ɵɵlistener(\"ngModelChange\", function BattleComponent_div_0_Template_input_ngModelChange_1_listener($event) {\n      i0.ɵɵrestoreView(_r3);\n      const ctx_r2 = i0.ɵɵnextContext();\n      return ctx_r2.userId = $event;\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(2, \"button\", 1);\n    i0.ɵɵlistener(\"click\", function BattleComponent_div_0_Template_button_click_2_listener() {\n      i0.ɵɵrestoreView(_r3);\n      const ctx_r4 = i0.ɵɵnextContext();\n      ctx_r4.charService.login(ctx_r4.userId);\n      return ctx_r4.ngOnInit();\n    });\n    i0.ɵɵtext(3, \"Login\");\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngModel\", ctx_r0.userId);\n  }\n}\n\nfunction BattleComponent_span_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r6 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"span\");\n    i0.ɵɵelement(1, \"br\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementStart(3, \"button\", 3);\n    i0.ɵɵlistener(\"click\", function BattleComponent_span_1_Template_button_click_3_listener() {\n      i0.ɵɵrestoreView(_r6);\n      const ctx_r5 = i0.ɵɵnextContext();\n      ctx_r5.charService.logout();\n      return ctx_r5.ngOnInit();\n    });\n    i0.ɵɵtext(4, \" Logout \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(5, \"br\")(6, \"br\");\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" Logged in as: \", ctx_r1.currentUser, \" \");\n  }\n}\n\nexport class BattleComponent {\n  constructor(dndService, charService, toonService) {\n    this.dndService = dndService;\n    this.charService = charService;\n    this.toonService = toonService;\n    this.favorites = [];\n    this.searchedCharacters = [];\n    this.currentUser = this.charService.currentUser;\n    this.name = '';\n    this.newFavorite = new Favorite(-1, 'user here', -1);\n    this.userId = '';\n    this.userHealth = 20;\n    this.cartoonHealth = 25;\n    this.attack_user = 0;\n    this.attack_cartoon = 0;\n    this.Victory = ''; // currentToon = this.cartoonChar.cartSearch;\n    // currentFavorite = this.cartoonChar.favSearch;\n\n    this.favSearch = this.toonService.favSearch;\n    this.cartSearch = this.toonService.cartSearch;\n    this.charService.showAllCharacters().subscribe(result => {\n      this.searchedCharacters = result;\n      console.log(this.searchedCharacters);\n    });\n    this.showAllFavorites();\n  }\n\n  showAllFavorites() {\n    this.dndService.showFavorites().subscribe(allFavorites => {\n      this.favorites = allFavorites;\n    });\n  }\n\n  GetCharacterByName(name) {\n    var _a;\n\n    let searchByFaves = (_a = document.getElementById('favSearchCheckBox')) !== null && _a !== void 0 ? _a : false;\n    this.charService.GetCharacterByName(name).subscribe(response => {\n      this.searchedCharacters = response;\n      console.log(this.searchedCharacters);\n      console.log(this.currentUser);\n\n      if (!searchByFaves.checked) {\n        this.searchForFavorites();\n      }\n    });\n  }\n\n  searchForFavorites() {\n    let newSearched = [];\n    newSearched = this.searchedCharacters.filter(character => this.isFavorited(character.pkId));\n    console.log(newSearched);\n    this.searchedCharacters = newSearched;\n  }\n\n  isFavorited(characterId) {\n    for (let i = 0; i < this.favorites.length; i++) {\n      if (this.favorites[i].id == characterId && this.favorites[i].userId === this.charService.currentUser) {\n        return true;\n      }\n    }\n\n    return false;\n  }\n\n  createFavorite(characterId) {\n    this.newFavorite = new Favorite(undefined, this.charService.currentUser, characterId);\n    this.dndService.createFavorite(this.newFavorite).subscribe(() => {\n      this.showAllFavorites();\n    });\n  }\n\n  deleteFavorite(characterId) {\n    let foundFav = this.favorites.find(favorite => favorite.id === characterId && favorite.userId === this.charService.currentUser);\n    this.dndService.deleteFavorite(foundFav.pkId).subscribe(() => {\n      this.favorites.splice(this.favorites.indexOf(foundFav), 1);\n    });\n  }\n\n  getCartoonAttack() {\n    return Math.floor(Math.random() * (10 - 1)) + 1;\n  }\n\n  getUserAttack() {\n    return Math.floor(Math.random() * (10 - 1)) + 1;\n  }\n\n  delay(ms) {\n    return new Promise(resolve => setTimeout(resolve, ms));\n  }\n\n  BattleItOut() {\n    var _this = this;\n\n    return _asyncToGenerator(function* () {\n      _this.userHealth = 20;\n      _this.cartoonHealth = 25;\n      let defeated = false;\n\n      while (defeated === false) {\n        console.log(_this.userHealth);\n        console.log(_this.cartoonHealth);\n\n        let Cartoonattack = _this.getCartoonAttack();\n\n        _this.attack_cartoon = Cartoonattack;\n        console.log(_this.cartSearch + \" hits for \" + Cartoonattack);\n        _this.userHealth = _this.userHealth - Cartoonattack;\n        console.log(\"User Health:\" + _this.userHealth);\n\n        let Userattack = _this.getUserAttack();\n\n        _this.attack_user = Userattack;\n        console.log(_this.favSearch + \" hits for \" + Userattack);\n        _this.cartoonHealth = _this.cartoonHealth - Userattack;\n        console.log(\"Cartoon Health:\" + _this.cartoonHealth);\n        yield _this.delay(100);\n\n        if (_this.userHealth <= 0) {\n          _this.Victory = \"You Got smacked by \" + _this.cartSearch;\n          defeated = true;\n        }\n\n        if (_this.cartoonHealth <= 0) {\n          _this.Victory = \"Congratulations!\" + _this.currentUser + \"You beat\" + _this.cartSearch;\n          defeated = true;\n        }\n      }\n    })();\n  }\n\n  ngOnInit() {\n    this.currentUser = this.charService.currentUser;\n    this.userId = '';\n    this.GetCharacterByName('');\n    this.favSearch = this.toonService.favSearch;\n    this.cartSearch = this.toonService.cartSearch;\n  }\n\n}\n\nBattleComponent.ɵfac = function BattleComponent_Factory(t) {\n  return new (t || BattleComponent)(i0.ɵɵdirectiveInject(i1.DndService), i0.ɵɵdirectiveInject(i2.CharacterService), i0.ɵɵdirectiveInject(i3.ToonServiceService));\n};\n\nBattleComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: BattleComponent,\n  selectors: [[\"app-battle\"]],\n  decls: 9,\n  vars: 9,\n  consts: [[4, \"ngIf\"], [3, \"click\"], [\"type\", \"text\", \"id\", \"username\", \"placeholder\", \"Username\", 3, \"ngModel\", \"ngModelChange\"], [1, \"buttonStyle\", 3, \"click\"]],\n  template: function BattleComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵtemplate(0, BattleComponent_div_0_Template, 4, 1, \"div\", 0);\n      i0.ɵɵtemplate(1, BattleComponent_span_1_Template, 7, 1, \"span\", 0);\n      i0.ɵɵtext(2);\n      i0.ɵɵelementStart(3, \"p\");\n      i0.ɵɵtext(4);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(5, \"p\");\n      i0.ɵɵtext(6);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(7, \"button\", 1);\n      i0.ɵɵlistener(\"click\", function BattleComponent_Template_button_click_7_listener() {\n        return ctx.BattleItOut();\n      });\n      i0.ɵɵtext(8, \"Battle\");\n      i0.ɵɵelementEnd();\n    }\n\n    if (rf & 2) {\n      i0.ɵɵproperty(\"ngIf\", ctx.currentUser === \"\");\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.currentUser !== \"\");\n      i0.ɵɵadvance(1);\n      i0.ɵɵtextInterpolate2(\" \", ctx.cartSearch, \" \", ctx.favSearch, \"\\n\");\n      i0.ɵɵadvance(2);\n      i0.ɵɵtextInterpolate4(\" User Health:\", ctx.userHealth, \" User Attack:\", ctx.attack_user, \" \\u00A0 \\u00A0 Cartoon Health:\", ctx.cartoonHealth, \" Cartoon Attack:\", ctx.attack_cartoon, \" \");\n      i0.ɵɵadvance(2);\n      i0.ɵɵtextInterpolate(ctx.Victory);\n    }\n  },\n  directives: [i4.NgIf, i5.DefaultValueAccessor, i5.NgControlStatus, i5.NgModel],\n  styles: [\"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJiYXR0bGUuY29tcG9uZW50LmNzcyJ9 */\"]\n});","map":{"version":3,"sources":["C:/Users/pmanf/Desktop/Grand Circus/unit9/GCFinalProject/GCFinalProject/ClientApp/src/app/battle/battle.component.ts"],"names":["Favorite","i0","i1","i2","i3","i4","i5","BattleComponent_div_0_Template","rf","ctx","_r3","ɵɵgetCurrentView","ɵɵelementStart","ɵɵlistener","BattleComponent_div_0_Template_input_ngModelChange_1_listener","$event","ɵɵrestoreView","ctx_r2","ɵɵnextContext","userId","ɵɵelementEnd","BattleComponent_div_0_Template_button_click_2_listener","ctx_r4","charService","login","ngOnInit","ɵɵtext","ctx_r0","ɵɵadvance","ɵɵproperty","BattleComponent_span_1_Template","_r6","ɵɵelement","BattleComponent_span_1_Template_button_click_3_listener","ctx_r5","logout","ctx_r1","ɵɵtextInterpolate1","currentUser","BattleComponent","constructor","dndService","toonService","favorites","searchedCharacters","name","newFavorite","userHealth","cartoonHealth","attack_user","attack_cartoon","Victory","favSearch","cartSearch","showAllCharacters","subscribe","result","console","log","showAllFavorites","showFavorites","allFavorites","GetCharacterByName","_a","searchByFaves","document","getElementById","response","checked","searchForFavorites","newSearched","filter","character","isFavorited","pkId","characterId","i","length","id","createFavorite","undefined","deleteFavorite","foundFav","find","favorite","splice","indexOf","getCartoonAttack","Math","floor","random","getUserAttack","delay","ms","Promise","resolve","setTimeout","BattleItOut","defeated","Cartoonattack","Userattack","ɵfac","BattleComponent_Factory","t","ɵɵdirectiveInject","DndService","CharacterService","ToonServiceService","ɵcmp","ɵɵdefineComponent","type","selectors","decls","vars","consts","template","BattleComponent_Template","ɵɵtemplate","BattleComponent_Template_button_click_7_listener","ɵɵtextInterpolate2","ɵɵtextInterpolate4","ɵɵtextInterpolate","directives","NgIf","DefaultValueAccessor","NgControlStatus","NgModel","styles"],"mappings":"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","sourcesContent":["import { Favorite } from '../favorite';\r\nimport * as i0 from \"@angular/core\";\r\nimport * as i1 from \"../dnd.service\";\r\nimport * as i2 from \"../character.service\";\r\nimport * as i3 from \"../toon-service.service\";\r\nimport * as i4 from \"@angular/common\";\r\nimport * as i5 from \"@angular/forms\";\r\nfunction BattleComponent_div_0_Template(rf, ctx) { if (rf & 1) {\r\n    const _r3 = i0.ɵɵgetCurrentView();\r\n    i0.ɵɵelementStart(0, \"div\")(1, \"input\", 2);\r\n    i0.ɵɵlistener(\"ngModelChange\", function BattleComponent_div_0_Template_input_ngModelChange_1_listener($event) { i0.ɵɵrestoreView(_r3); const ctx_r2 = i0.ɵɵnextContext(); return ctx_r2.userId = $event; });\r\n    i0.ɵɵelementEnd();\r\n    i0.ɵɵelementStart(2, \"button\", 1);\r\n    i0.ɵɵlistener(\"click\", function BattleComponent_div_0_Template_button_click_2_listener() { i0.ɵɵrestoreView(_r3); const ctx_r4 = i0.ɵɵnextContext(); ctx_r4.charService.login(ctx_r4.userId); return ctx_r4.ngOnInit(); });\r\n    i0.ɵɵtext(3, \"Login\");\r\n    i0.ɵɵelementEnd()();\r\n} if (rf & 2) {\r\n    const ctx_r0 = i0.ɵɵnextContext();\r\n    i0.ɵɵadvance(1);\r\n    i0.ɵɵproperty(\"ngModel\", ctx_r0.userId);\r\n} }\r\nfunction BattleComponent_span_1_Template(rf, ctx) { if (rf & 1) {\r\n    const _r6 = i0.ɵɵgetCurrentView();\r\n    i0.ɵɵelementStart(0, \"span\");\r\n    i0.ɵɵelement(1, \"br\");\r\n    i0.ɵɵtext(2);\r\n    i0.ɵɵelementStart(3, \"button\", 3);\r\n    i0.ɵɵlistener(\"click\", function BattleComponent_span_1_Template_button_click_3_listener() { i0.ɵɵrestoreView(_r6); const ctx_r5 = i0.ɵɵnextContext(); ctx_r5.charService.logout(); return ctx_r5.ngOnInit(); });\r\n    i0.ɵɵtext(4, \" Logout \");\r\n    i0.ɵɵelementEnd();\r\n    i0.ɵɵelement(5, \"br\")(6, \"br\");\r\n    i0.ɵɵelementEnd();\r\n} if (rf & 2) {\r\n    const ctx_r1 = i0.ɵɵnextContext();\r\n    i0.ɵɵadvance(2);\r\n    i0.ɵɵtextInterpolate1(\" Logged in as: \", ctx_r1.currentUser, \" \");\r\n} }\r\nexport class BattleComponent {\r\n    constructor(dndService, charService, toonService) {\r\n        this.dndService = dndService;\r\n        this.charService = charService;\r\n        this.toonService = toonService;\r\n        this.favorites = [];\r\n        this.searchedCharacters = [];\r\n        this.currentUser = this.charService.currentUser;\r\n        this.name = '';\r\n        this.newFavorite = new Favorite(-1, 'user here', -1);\r\n        this.userId = '';\r\n        this.userHealth = 20;\r\n        this.cartoonHealth = 25;\r\n        this.attack_user = 0;\r\n        this.attack_cartoon = 0;\r\n        this.Victory = '';\r\n        // currentToon = this.cartoonChar.cartSearch;\r\n        // currentFavorite = this.cartoonChar.favSearch;\r\n        this.favSearch = this.toonService.favSearch;\r\n        this.cartSearch = this.toonService.cartSearch;\r\n        this.charService.showAllCharacters().subscribe((result) => {\r\n            this.searchedCharacters = result;\r\n            console.log(this.searchedCharacters);\r\n        });\r\n        this.showAllFavorites();\r\n    }\r\n    showAllFavorites() {\r\n        this.dndService.showFavorites().subscribe((allFavorites) => {\r\n            this.favorites = allFavorites;\r\n        });\r\n    }\r\n    GetCharacterByName(name) {\r\n        var _a;\r\n        let searchByFaves = (_a = document.getElementById('favSearchCheckBox')) !== null && _a !== void 0 ? _a : false;\r\n        this.charService.GetCharacterByName(name).subscribe((response) => {\r\n            this.searchedCharacters = response;\r\n            console.log(this.searchedCharacters);\r\n            console.log(this.currentUser);\r\n            if (!searchByFaves.checked) {\r\n                this.searchForFavorites();\r\n            }\r\n        });\r\n    }\r\n    searchForFavorites() {\r\n        let newSearched = [];\r\n        newSearched = this.searchedCharacters.filter((character) => this.isFavorited(character.pkId));\r\n        console.log(newSearched);\r\n        this.searchedCharacters = newSearched;\r\n    }\r\n    isFavorited(characterId) {\r\n        for (let i = 0; i < this.favorites.length; i++) {\r\n            if (this.favorites[i].id == characterId &&\r\n                this.favorites[i].userId === this.charService.currentUser) {\r\n                return true;\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n    createFavorite(characterId) {\r\n        this.newFavorite = new Favorite(undefined, this.charService.currentUser, characterId);\r\n        this.dndService.createFavorite(this.newFavorite).subscribe(() => {\r\n            this.showAllFavorites();\r\n        });\r\n    }\r\n    deleteFavorite(characterId) {\r\n        let foundFav = this.favorites.find((favorite) => favorite.id === characterId &&\r\n            favorite.userId === this.charService.currentUser);\r\n        this.dndService.deleteFavorite(foundFav.pkId).subscribe(() => {\r\n            this.favorites.splice(this.favorites.indexOf(foundFav), 1);\r\n        });\r\n    }\r\n    getCartoonAttack() {\r\n        return Math.floor(Math.random() * (10 - 1)) + 1;\r\n    }\r\n    getUserAttack() {\r\n        return Math.floor(Math.random() * (10 - 1)) + 1;\r\n    }\r\n    delay(ms) {\r\n        return new Promise(resolve => setTimeout(resolve, ms));\r\n    }\r\n    async BattleItOut() {\r\n        this.userHealth = 20;\r\n        this.cartoonHealth = 25;\r\n        let defeated = false;\r\n        while (defeated === false) {\r\n            console.log(this.userHealth);\r\n            console.log(this.cartoonHealth);\r\n            let Cartoonattack = this.getCartoonAttack();\r\n            this.attack_cartoon = Cartoonattack;\r\n            console.log(this.cartSearch + \" hits for \" + Cartoonattack);\r\n            this.userHealth = this.userHealth - Cartoonattack;\r\n            console.log(\"User Health:\" + this.userHealth);\r\n            let Userattack = this.getUserAttack();\r\n            this.attack_user = Userattack;\r\n            console.log(this.favSearch + \" hits for \" + Userattack);\r\n            this.cartoonHealth = this.cartoonHealth - Userattack;\r\n            console.log(\"Cartoon Health:\" + this.cartoonHealth);\r\n            await this.delay(100);\r\n            if (this.userHealth <= 0) {\r\n                this.Victory = \"You Got smacked by \" + this.cartSearch;\r\n                defeated = true;\r\n            }\r\n            if (this.cartoonHealth <= 0) {\r\n                this.Victory = \"Congratulations!\" + this.currentUser + \"You beat\" + this.cartSearch;\r\n                defeated = true;\r\n            }\r\n        }\r\n    }\r\n    ngOnInit() {\r\n        this.currentUser = this.charService.currentUser;\r\n        this.userId = '';\r\n        this.GetCharacterByName('');\r\n        this.favSearch = this.toonService.favSearch;\r\n        this.cartSearch = this.toonService.cartSearch;\r\n    }\r\n}\r\nBattleComponent.ɵfac = function BattleComponent_Factory(t) { return new (t || BattleComponent)(i0.ɵɵdirectiveInject(i1.DndService), i0.ɵɵdirectiveInject(i2.CharacterService), i0.ɵɵdirectiveInject(i3.ToonServiceService)); };\r\nBattleComponent.ɵcmp = /*@__PURE__*/ i0.ɵɵdefineComponent({ type: BattleComponent, selectors: [[\"app-battle\"]], decls: 9, vars: 9, consts: [[4, \"ngIf\"], [3, \"click\"], [\"type\", \"text\", \"id\", \"username\", \"placeholder\", \"Username\", 3, \"ngModel\", \"ngModelChange\"], [1, \"buttonStyle\", 3, \"click\"]], template: function BattleComponent_Template(rf, ctx) { if (rf & 1) {\r\n        i0.ɵɵtemplate(0, BattleComponent_div_0_Template, 4, 1, \"div\", 0);\r\n        i0.ɵɵtemplate(1, BattleComponent_span_1_Template, 7, 1, \"span\", 0);\r\n        i0.ɵɵtext(2);\r\n        i0.ɵɵelementStart(3, \"p\");\r\n        i0.ɵɵtext(4);\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementStart(5, \"p\");\r\n        i0.ɵɵtext(6);\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementStart(7, \"button\", 1);\r\n        i0.ɵɵlistener(\"click\", function BattleComponent_Template_button_click_7_listener() { return ctx.BattleItOut(); });\r\n        i0.ɵɵtext(8, \"Battle\");\r\n        i0.ɵɵelementEnd();\r\n    } if (rf & 2) {\r\n        i0.ɵɵproperty(\"ngIf\", ctx.currentUser === \"\");\r\n        i0.ɵɵadvance(1);\r\n        i0.ɵɵproperty(\"ngIf\", ctx.currentUser !== \"\");\r\n        i0.ɵɵadvance(1);\r\n        i0.ɵɵtextInterpolate2(\" \", ctx.cartSearch, \" \", ctx.favSearch, \"\\n\");\r\n        i0.ɵɵadvance(2);\r\n        i0.ɵɵtextInterpolate4(\" User Health:\", ctx.userHealth, \" User Attack:\", ctx.attack_user, \" \\u00A0 \\u00A0 Cartoon Health:\", ctx.cartoonHealth, \" Cartoon Attack:\", ctx.attack_cartoon, \" \");\r\n        i0.ɵɵadvance(2);\r\n        i0.ɵɵtextInterpolate(ctx.Victory);\r\n    } }, directives: [i4.NgIf, i5.DefaultValueAccessor, i5.NgControlStatus, i5.NgModel], styles: [\"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJiYXR0bGUuY29tcG9uZW50LmNzcyJ9 */\"] });\r\n"]},"metadata":{},"sourceType":"module"}